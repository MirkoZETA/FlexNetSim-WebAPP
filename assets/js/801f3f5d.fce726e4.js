"use strict";(self.webpackChunkflex_net_sim_web_app=self.webpackChunkflex_net_sim_web_app||[]).push([[782],{1468:(e,s,a)=>{a.r(s),a.d(s,{default:()=>ie});var t=a(6540),i=a(1410),n=a(4164),r=a(797),l=a(9303);const o="appContainer_0NVX",c="header_tRbQ",d="subtitle_KLfx",m="mainContentWrapper_PSgw",u="tabsContainer_ErfH",h="tabsHeader_heDO",p="tabsList_bVNX",g="tabButton_T7tU",x="activeTab_wW14",N="tabLabel_N6gy",j="simulatingTab_Avqh",b="tabProgress_HLHJ",v="tabCloseButton_Q9yk",f="addTabButton_zIFY",C="tabsContentArea_fwFg",S="tabContent_y40f",_="hiddenContent_jKFN",k="activeContent_JzO0",w="stageContainer_TVrO",$="stageIndicator_b0N_",F="stageStep_lFd9",y="stageNumber_NLTP",L="stageName_Qcsm",T="stageLine_oH2n",P="activeStage_FGQM",A="parametersContainer_pT6V",E="sectionTitle_ooXP",R="formGrid_HIPk",H="formGroup_dXNb",I="input_UHhf",O="select_WD2B",B="inputHint_NgRc",K="buttonContainer_jTZK",M="primaryButton_b9_t",W="secondaryButton_kfQU",G="resultsContainer_maX9",Q="resultsHeader_qGOj",V="progressContainer_WMHg",D="progressBar_g3R9",X="progressFill_D3pn",J="progressText_EBhL",U="outputContainer_HSV3",q="outputPre_iAGV",z="outputLine_HT1D",Y="cursor_Qyf7";var Z=a(4848);const ee=["NSFNet","Cost239","EuroCore","GermanNet","UKNet"],se=["FirstFit","BestFit"],ae=["fixed-rate","flex-rate"],te=()=>Math.floor(1e6*Math.random());const ie=function(){const{siteConfig:e}=(0,r.A)(),s=1,a=2,ie=3,[ne,re]=(0,t.useState)([{id:te(),name:"Simulation 1",stage:s,isSimulating:!1,outputLines:[],progress:0,params:{algorithm:"FirstFit",networkType:1,goalConnections:1e5,confidence:.05,lambdaParam:1,mu:10,network:"NSFNet",bitrate:"fixed-rate",K:3}}]),[le,oe]=(0,t.useState)("sim-0"),ce=(0,t.useRef)({}),de=(0,t.useRef)({});(0,t.useEffect)((()=>{ne.forEach((e=>{ce.current[e.id]&&e.outputLines.length>0&&(ce.current[e.id].scrollTop=ce.current[e.id].scrollHeight)}))}),[ne]),(0,t.useEffect)((()=>()=>{Object.values(de.current).forEach((e=>{e&&e.close()}))}),[]);const me=(e,s)=>{re((a=>a.map((a=>a.id===e?{...a,..."function"==typeof s?s(a):s}:a))))},ue=(e,s)=>{const{name:a,value:t}=s.target,i=["goalConnections","networkType","K"].includes(a)?parseInt(t,10):["lambdaParam","mu","confidence"].includes(a)?parseFloat(t):t;me(e,(e=>({params:{...e.params,[a]:i}})))},he=async e=>{const s=ne.find((s=>s.id===e));if(!s)return;const a=s.params;me(e,{stage:ie,isSimulating:!0,outputLines:[],progress:0,name:a.network+" - "+a.algorithm}),de.current[e]&&de.current[e].close(),me(e,{outputLines:["Connecting to FlexNetSim API..."]});try{if(!1)return void(e=>{const s=ne.find((s=>s.id===e));if(!s)return;const a=s.params;me(e,{stage:ie,isSimulating:!0,outputLines:[],name:a.network+" - "+a.algorithm,progress:0});const t=["--- Flex Net Sim (0.8.0) ---"," ","Nodes:              "+("NSFNet"===a.network?"14":"Cost239"===a.network?"11":"16"),"Links:              "+("NSFNet"===a.network?"42":"Cost239"===a.network?"26":"48"),`Goal Connections:   ${a.goalConnections}`,`Lambda:             ${a.lambdaParam}`,`Mu:                 ${a.mu}`,`Algorithm:          ${a.algorithm}`," ","+----------+----------+----------+----------+----------+----------+----------+","| progress | arrives  | blocking | time(s)  | Wald CI  | A-C. CI  | Wilson CI|","+----------+----------+----------+----------+----------+----------+----------+"];me(e,{outputLines:t});let i=0;const n=setInterval((()=>{if(i++,i<=20){const s=5*i,t=Math.floor(s/100*a.goalConnections),n=(5*Math.random()).toFixed(1)+"e-05",r=Math.floor(75*s/100),l=(2*Math.random()).toFixed(1)+"e-05",o=(5*Math.random()+1).toFixed(1)+"e-05",c=(4*Math.random()+1).toFixed(1)+"e-05",d=`|   ${s.toFixed(1)}%  | ${t.toString().padStart(6," ")}   |  ${n} |      ${r.toString().padStart(2," ")}  |  ${l} |  ${o} |  ${c} |`;me(e,(e=>({outputLines:[...e.outputLines,d],progress:s})))}else clearInterval(n),me(e,{isSimulating:!1})}),1e3)})(e);const s=await fetch("https://fns-api-cloud-run-787143541358.us-central1.run.app/run_simulation_stream",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);const t=s.body.getReader(),i=new TextDecoder;let n="";(async()=>{for(;;)try{const{done:a,value:r}=await t.read();if(a){me(e,{isSimulating:!1});break}n+=i.decode(r,{stream:!0});let l=n.split("\n");n=l.pop()||"";let o=null;for(const t of l)if(t.startsWith("event:"))o=t.substring(6).trim();else if(t.startsWith("data:"))try{const s=JSON.parse(t.substring(5).trim());switch(o){case"start":me(e,(e=>({outputLines:[...e.outputLines,s.message]})));break;case"data":const a=s.message.match(/\|\s+(\d+\.\d)%\s+\|/),t=a?parseFloat(a[1]):0;me(e,(e=>({outputLines:[...e.outputLines,s.message],progress:t})));break;case"end":me(e,{isSimulating:!1}),me(e,(e=>({progress:100})));break;case"error":me(e,{isSimulating:!1}),me(e,(e=>({outputLines:[...e.outputLines,`Error: ${s.message}`]})))}}catch(s){console.error("Error parsing SSE data:",s),me(e,(e=>({outputLines:[...e.outputLines,`Warning: Error parsing data from server: ${s.message}`]}))),me(e,(e=>({outputLines:[...e.outputLines,t]})))}}catch(a){console.error("Error reading stream:",a),me(e,(e=>({outputLines:[...e.outputLines,`Error reading data stream: ${a.message}`],isSimulating:!1})));break}})()}catch(t){console.error("Error starting simulation:",t),me(e,(e=>({outputLines:[...e.outputLines,`Error: ${t.message}`,"","Possible reasons:","- The API server might be down or unreachable","- CORS policies might be preventing the connection","- Network connectivity issues",""]}))),me(e,{isSimulating:!1})}},pe=e=>{me(e,(e=>({stage:e.stage>s?e.stage-1:e.stage})))},ge=e=>(0,Z.jsxs)("div",{className:A,children:[(0,Z.jsx)(l.A,{as:"h3",className:E,children:"Network Settings"}),(0,Z.jsxs)("div",{className:R,children:[(0,Z.jsxs)("div",{className:H,children:[(0,Z.jsx)("label",{htmlFor:`network-${e.id}`,children:"Network Topology"}),(0,Z.jsx)("select",{id:`network-${e.id}`,name:"network",value:e.params.network,onChange:s=>ue(e.id,s),className:O,children:ee.map((e=>(0,Z.jsx)("option",{value:e,children:e},e)))}),(0,Z.jsx)("span",{className:B,children:"Physical network to simulate"})]}),(0,Z.jsxs)("div",{className:H,children:[(0,Z.jsx)("label",{htmlFor:`networkType-${e.id}`,children:"Network Type"}),(0,Z.jsx)("select",{id:`networkType-${e.id}`,name:"networkType",value:e.params.networkType,onChange:s=>ue(e.id,s),className:O,children:(0,Z.jsx)("option",{value:1,children:"EON (Elastic Optical Network)"})}),(0,Z.jsx)("span",{className:B,children:"Only EON is currently supported"})]}),(0,Z.jsxs)("div",{className:H,children:[(0,Z.jsx)("label",{htmlFor:`bitrate-${e.id}`,children:"Bitrate Type"}),(0,Z.jsx)("select",{id:`bitrate-${e.id}`,name:"bitrate",value:e.params.bitrate,onChange:s=>ue(e.id,s),className:O,children:ae.map((e=>(0,Z.jsx)("option",{value:e,children:e},e)))}),(0,Z.jsx)("span",{className:B,children:"Fixed or flex-rate transmission"})]}),(0,Z.jsxs)("div",{className:H,children:[(0,Z.jsx)("label",{htmlFor:`K-${e.id}`,children:"Path Count (K)"}),(0,Z.jsx)("input",{type:"number",id:`K-${e.id}`,name:"K",min:"1",max:"6",value:e.params.K,onChange:s=>ue(e.id,s),className:I}),(0,Z.jsx)("span",{className:B,children:"Number of candidate paths (1-6)"})]})]}),(0,Z.jsx)("div",{className:K,children:(0,Z.jsx)("button",{className:M,onClick:()=>{return s=e.id,void me(s,(e=>({stage:e.stage<ie?e.stage+1:e.stage})));var s},children:"Next: Simulation Parameters"})})]}),xe=e=>{switch(e.stage){case s:return ge(e);case a:return(e=>(0,Z.jsxs)("div",{className:A,children:[(0,Z.jsx)(l.A,{as:"h3",className:E,children:"Simulation Parameters"}),(0,Z.jsxs)("div",{className:R,children:[(0,Z.jsxs)("div",{className:H,children:[(0,Z.jsx)("label",{htmlFor:`algorithm-${e.id}`,children:"RSA Algorithm"}),(0,Z.jsx)("select",{id:`algorithm-${e.id}`,name:"algorithm",value:e.params.algorithm,onChange:s=>ue(e.id,s),className:O,children:se.map((e=>(0,Z.jsx)("option",{value:e,children:e},e)))}),(0,Z.jsx)("span",{className:B,children:"Resource allocation algorithm"})]}),(0,Z.jsxs)("div",{className:H,children:[(0,Z.jsx)("label",{htmlFor:`goalConnections-${e.id}`,children:"Target Connections"}),(0,Z.jsx)("input",{type:"number",id:`goalConnections-${e.id}`,name:"goalConnections",min:"1000",max:"10000000",value:e.params.goalConnections,onChange:s=>ue(e.id,s),className:I}),(0,Z.jsx)("span",{className:B,children:"Number of connection requests"})]}),(0,Z.jsxs)("div",{className:H,children:[(0,Z.jsx)("label",{htmlFor:`lambdaParam-${e.id}`,children:"Arrival Rate (\u03bb)"}),(0,Z.jsx)("input",{type:"number",id:`lambdaParam-${e.id}`,name:"lambdaParam",min:"0.1",step:"0.1",value:e.params.lambdaParam,onChange:s=>ue(e.id,s),className:I}),(0,Z.jsx)("span",{className:B,children:"Connection arrival rate"})]}),(0,Z.jsxs)("div",{className:H,children:[(0,Z.jsx)("label",{htmlFor:`mu-${e.id}`,children:"Service Rate (\u03bc)"}),(0,Z.jsx)("input",{type:"number",id:`mu-${e.id}`,name:"mu",min:"0.1",step:"0.1",value:e.params.mu,onChange:s=>ue(e.id,s),className:I}),(0,Z.jsx)("span",{className:B,children:"Connection service rate"})]}),(0,Z.jsxs)("div",{className:H,children:[(0,Z.jsx)("label",{htmlFor:`confidence-${e.id}`,children:"Confidence Level"}),(0,Z.jsx)("input",{type:"number",id:`confidence-${e.id}`,name:"confidence",min:"0.01",max:"0.99",step:"0.01",value:e.params.confidence,onChange:s=>ue(e.id,s),className:I}),(0,Z.jsx)("span",{className:B,children:"Statistical confidence (0.05 = 95%)"})]})]}),(0,Z.jsxs)("div",{className:K,children:[(0,Z.jsx)("button",{className:W,onClick:()=>pe(e.id),children:"Back"}),(0,Z.jsx)("button",{className:M,onClick:()=>he(e.id),disabled:e.isSimulating,children:e.isSimulating?"Simulating...":"Run Simulation"})]})]}))(e);case ie:return(e=>(0,Z.jsxs)("div",{className:G,children:[(0,Z.jsxs)("div",{className:Q,children:[(0,Z.jsx)(l.A,{as:"h3",className:E,children:"Simulation Results"}),e.isSimulating&&(0,Z.jsxs)("div",{className:V,children:[(0,Z.jsx)("div",{className:D,children:(0,Z.jsx)("div",{className:X,style:{width:`${e.progress}%`}})}),(0,Z.jsxs)("span",{className:J,children:[e.progress.toFixed(1),"% Complete"]})]})]}),(0,Z.jsx)("div",{className:U,ref:s=>ce.current[e.id]=s,children:(0,Z.jsxs)("pre",{className:q,children:[e.outputLines.map(((e,s)=>(0,Z.jsx)("div",{className:z,children:e},s))),e.isSimulating&&(0,Z.jsx)("div",{className:Y,children:"\u258b"})]})}),(0,Z.jsxs)("div",{className:K,children:[(0,Z.jsx)("button",{className:W,onClick:()=>pe(e.id),disabled:e.isSimulating,children:"Back"}),!e.isSimulating&&e.outputLines.length>0&&(0,Z.jsx)("button",{className:M,onClick:()=>he(e.id),children:"Run Again"})]})]}))(e);default:return null}};return(0,Z.jsx)(i.A,{title:`Playground | ${e.title}`,description:"Interactive playground for FlexNetSim optical network simulations",children:(0,Z.jsxs)("div",{className:o,children:[(0,Z.jsxs)("header",{className:c,children:[(0,Z.jsx)(l.A,{as:"h1",children:"Simulation Playground"}),(0,Z.jsx)("p",{className:d,children:"Experiment with the Flex Net Sim C++ library through an interactive interface"})]}),(0,Z.jsx)("div",{className:m,children:(0,Z.jsxs)("div",{className:u,children:[(0,Z.jsx)("div",{className:h,children:(0,Z.jsxs)("div",{className:p,children:[ne.map(((e,s)=>(0,Z.jsxs)("div",{className:(0,n.A)(g,le===`sim-${s}`&&x,e.isSimulating&&j),onClick:()=>oe(`sim-${s}`),children:[(0,Z.jsxs)("span",{className:N,children:[e.name,e.isSimulating&&(0,Z.jsxs)("span",{className:b,children:[" ","(",e.progress.toFixed(0),"%)"]})]}),s>0&&(0,Z.jsx)("button",{className:v,onClick:e=>{e.stopPropagation(),(e=>{if(ne.length<=1)return;const s=ne[e];if(de.current[s.id]&&(de.current[s.id].close(),delete de.current[s.id]),re((s=>s.filter(((s,a)=>a!==e)))),le===`sim-${e}`)oe("sim-0");else if(parseInt(le.split("-")[1])>e){const e=parseInt(le.split("-")[1])-1;oe(`sim-${e}`)}})(s)},disabled:e.isSimulating,children:"\xd7"})]},`tab-${s}`))),ne.length<3&&(0,Z.jsx)("button",{className:f,onClick:()=>{if(ne.length>=3)return;const e=ne.length,a={id:te(),name:`Simulation ${e+1}`,stage:s,isSimulating:!1,outputLines:[],progress:0,params:{algorithm:"FirstFit",networkType:1,goalConnections:1e5,confidence:.05,lambdaParam:1,mu:10,network:"NSFNet",bitrate:"fixed-rate",K:3}};re((e=>{const s=[...e,a];return setTimeout((()=>{oe("sim-"+(s.length-1))}),10),s}))},title:"Add new simulation",children:"+"})]})}),(0,Z.jsx)("div",{className:C,children:ne.map(((e,t)=>{return(0,Z.jsxs)("div",{className:(0,n.A)(S,le===`sim-${t}`?k:_),children:[(i=e,(0,Z.jsx)("div",{className:w,children:(0,Z.jsxs)("div",{className:$,children:[(0,Z.jsxs)("div",{className:(0,n.A)(F,i.stage>=s&&P),onClick:()=>!i.isSimulating&&me(i.id,{stage:s}),children:[(0,Z.jsx)("span",{className:y,children:"1"}),(0,Z.jsx)("span",{className:L,children:"Network"})]}),(0,Z.jsx)("div",{className:T}),(0,Z.jsxs)("div",{className:(0,n.A)(F,i.stage>=a&&P),onClick:()=>!i.isSimulating&&i.stage>=a&&me(i.id,{stage:a}),children:[(0,Z.jsx)("span",{className:y,children:"2"}),(0,Z.jsx)("span",{className:L,children:"Parameters"})]}),(0,Z.jsx)("div",{className:T}),(0,Z.jsxs)("div",{className:(0,n.A)(F,i.stage>=ie&&P),onClick:()=>!i.isSimulating&&i.stage>=ie&&me(i.id,{stage:ie}),children:[(0,Z.jsx)("span",{className:y,children:"3"}),(0,Z.jsx)("span",{className:L,children:"Results"})]})]})})),xe(e)]},`content-${t}`);var i}))})]})})]})})}}}]);